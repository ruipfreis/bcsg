"use strict";angular.module("bcsgApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).otherwise({redirectTo:"/"})}]).config(["$httpProvider",function(a){a.defaults.useXDomain=!0,delete a.defaults.headers.common["X-Requested-With"]}]),angular.module("bcsgApp").controller("MainCtrl",["$scope","BookService","Config",function(a,b,c){a.tabs=c.tabs,a.showTab=c.tabs[Object.keys(c.tabs)[0]],a.setTab=function(b){a.showTab=b},a.isTab=function(b){return a.showTab===b}}]),angular.module("bcsgApp").service("BookService",["Config","$http",function(a,b){return{get:function(c){return c?b.jsonp(a.api.url,{params:{callback:"JSON_CALLBACK",limit:a.api.defaultLimit,country:a.api.defaultCountry,media:a.api.mediaType.EBOOK,term:c}}):!1}}}]),angular.module("bcsgApp").constant("Config",{api:{url:"https://itunes.apple.com/search",defaultCountry:"gb",defaultLimit:"10",mediaType:{EBOOK:"ebook"}},tabs:{Hemingway:"hemingway",Dickens:"dickens",Shakespeare:"shakespeare"}}),angular.module("bcsgApp").directive("tabContent",["BookService",function(a){return{templateUrl:"views/tabContent.html",restrict:"E",scope:{},link:function(b,c,d){a.get(d.term).success(function(a){b.books=a.results})}}}]),angular.module("bcsgApp").run(["$templateCache",function(a){a.put("views/main.html",'<div class="tab-menu"> <ul> <li ng-repeat="(key, value) in tabs" ng-click="setTab(value)"> <h1>{{key}}</h1> </li> </ul> </div> <div class="tab-content-wrapper"> <tab-content ng-repeat="tab in tabs" ng-show="isTab(tab)" data-term="{{tab}}"></tab-content> </div>'),a.put("views/tabContent.html",'<div class="tab-book-list"> <ul> <li class="book-wrapper" ng-repeat="book in books"> <div class="img-wrapper"> <img src="{{book.artworkUrl100}}"> <h2> {{book.formattedPrice}} </h2> </div> <div class="info-wrapper"> <div class="top"> <h1> <a href="{{book.trackViewUrl}}" target="_blank"> {{book.trackName}} </a> </h1> </div> <p ng-bind-html="book.description"></p> </div> </li> </ul> </div>')}]);